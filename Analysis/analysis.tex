\chapter{Analysis}

\section{Introduction}

\subsection{Client Identification}

The clients i will be working with are Rob Curtis and Liz Jeffries. Rob is a skilled programer with a PHD in jarva scripting but also has a good understanding of everything in the computing world from construcing websites and database to creating androi apps. However liz is the pub's licence holder and does not have expearince with computers exepted for acssessing the internet, sending email for which she mainly does on a hudli tablet. Rob and Liz are both imployed by indervidual pubs limited which is ran by steve; a highly programer and Mathematician who has alot of in the field of programing and is the most familer with the current system. Steve also wrote the current system.

Rob and Liz have currently employ 11 people as bar staff all with diffrent technical abillitys such simon; a masters programing student. Nick; who is a self employed bicycle repairman but also knows his way around some quite complex sound systems. And shawn who has Down's syndrome and is unable to use the system. Rob has asked me to create a new stock controll system as he is constantly trying to work around the current systems lack of versatility. And having to ring Steve whenever they can not solve the problem localy, Steve has an comandline to the system via and app on his phone.

\subsection{The current system}

Stock management, the system manages the stock from when it is first enterd into the data base. once in a the database the stock is never deleted unless it was enterd incorrecty, in which case it is only edited. the only infomation to be deleted from the database is user infomation.

The current system has many functions besides stock management such the sale of item stock its self, this can be done by a card transaction, bitcoin or by cash in hand. the system handles the transaction makes the nessesery ajustments to the database and then sends data; time stamp, user, stock ID, retail prize of the transaction to the inderviduals pub's website. The system also records when staff clock on and off, total profit for the session as well as sub profits for the kitchen and bar. All this is sent to the companys website where it can be veiwed by with the correct permissions.

The system can controll the lights in the room and sets the indoor lights to dim when it darkens outside, but also turns the outdoor lights on at the same event. The system also has the ability to print out food orders, stock item labbels and stock lists;by location and by stock type.

The currnt system hold stock items in a table such as this: Stock item(\underline{stock ID}, name, \emph{stock type}, retail prize, \emph{producer}, \emph{suplier}, shelf life, \emph{unit purchase}, \emph{unit retail}, purchase cost, \emph{stock location}, units used, units remainning.



\subsection{Describe the problems}

There are a few problems with the current system but all of them are stock related with the beggest problem being not able to record waste correctly with wines and the cola pump. wine is served in four diffrent volumes; small(125ml), medium(175ml), large(250ml) and a bottle(750ml). if someone orderd two large glasses of wine and someone else orderd a medium glass of wine that would leave 75ml left in the bottle that cant be sold as there is not anough wine for a small glass nor does the system have a way of recording waste wine, so the wine is just thrown away with out the waste being recorded. this means that the wine can be drunken with out having to pay for it because there is no way of keeping track of where it has gone. There is a simular problem measureing a dash of coke when people have vodka and coke because some people only have as much coke as vodka but others fill the glass with coke, todiffrent amounts of coke but still charged the same amount.

When recording waste on the system you have to select what item was wasted, how the item was wasted and how much was wasted. for example pump 3, drip tray, 3 pints. however there can be errors when the user is entering this data. So the user could chose the wronge pump or wronge amount of beer wasted, if this happends then there is no way the undo it apart from sending an email to steve and even then it does not correct the problem only explains why the system says there is stock missing or left over. The final problems come when adding stock, when a new dilivery comes in it has to be booked into the system but this can also be done incorrectly and should be checked by the on duty manager however there is nothing to stop anyone from just submitting the new stock without it being checked. Alot of the stock comes in boxs such as crips or penuts so there are a certain amount of pakets inside and when the user enters the box on the system it comes up with a list of how many pakets are in the box, but if the corret number is not on the list the user has to contact the admin to get him to modify the code so that the correct number is added to the list.

when refilling stock behind the bar there are two ways of doing it the user can either refill all items by stock type or they can refill all the items in an location, however the user does this they have to acsses the system multiply times to get the next list that needs refilling which elongate the process considerably.



\subsection{Section appendix}

Interveiw with Rob outcome:

what manual processes do u have to carry out with the current stock system?
\begin{itemize}
    \item new stock order; when we get new stock from the suppliers we have to individually enter each item into the system by typing.
    \item drip trays; we have to measure out roughly how much is being wasted.
	\item stock rotation; as part of a stock check i have to make sure the stock has been rotated properly. so the newer stock is at the back of the shelf and the older stock is at the frount. i know how old an item is because of its stock ID, the greater the number, the newer it is.
	\item stock check; as a manager i have to check that we have the stock have on site matches what it say we have on the system, this is the remove any redundanciesfor example: A barrel of beer may have gone bad but it's hasn't been logged on the system for some reason. the system which is resposible for reordering stock doesnt reorder that barrel because it thinks we still have it and we end up a barrel short. with a stock check this would also be very difficult to figer out what had happend.
	\item record line waste; when a barrel is finished we clean the line before putting on a different beer. we then put a new beer on and record 2 pints of waste which is the volume of the pipe as there will be two pints in the pipe that we cant sell.
\end{itemize}

 what are the mains problems you have with the system?
\begin{itemize}
	\item cola pump; when a customer asks for a coke and vodka we ask how much coke they want, but if one customer only wants as much coke as vodka and another want the remainder of the glass filling, they are being charged the same amount for diffrent amounts of coke because we have no way to measure it. this also means that we can't record wastage very easily so we dont.
	\item wine wastage; often we are left with 75ml at the bottom of a wine bottle that we can sell because of the measures and weights act which states wine must be sold in 125ml, 175ml or 250ml glasses or by the bottle. this wine is often wasted as a result
	\item packet quantity; when entering new stock which is a box or pack i have to enter how many packets or bottles are inside from a fixed list however if the correct number is not there i have to ring steve to add the new option to the system
	\item refill items; when we have to refill stock or bottle up at the end of the night i have to print out sevral differnent stock list by location or by stock type instead of printing out one list to refill all stock with a display quantity.
\end{itemize}

do you have a prefered soloution to these problems?
\begin{itemize}
	\item Cola pump? No, we can not physically measure it so there is no point creating a option on the system to record it.
	\item Wine wastage? We can record the wastage but it would be good if we record how much of each wine we have in total then we sell wine from that collective source and not from each bottle.
	\item Packet quantity? I would like a menu where i can add new box, pack and card size, so i dont have to ring steve, cut out the midle man.
	\item Refill items? add a new option to the refill menu where u can refill all stock which are on display.
\end{itemize}

What data or information is recorded in the current system?
\begin{itemize}
	\item Name of item; the name of the drink or snack.
	\item Retail prize; the prize it cost the cutomer to buy a unit retail of the product .
	\item Producer; manufacturer of the product.
	\item Supplier; company that sells the product to the pub.
	\item Shelf life; date by which the product can not be sold after.
	\item Unit purchase; the unit that the pub buys the product in. 
	\item Unit retail; unit the pub sell the product
	\item Purchase cost; the cost the pub pays for 1 unit of a product
	\item Stock type; the type of stock such as snacks, real ale, cider
	\item Stock location; where the product is displayed
	\item User details; personal details of users DOB, bank details, National Insurance Number, privileges, name, address, phone number
\end{itemize}

How much data is recorded at present?
What data or information is to be recorded in the proposed system? How much data will the proposed system record?
How frequently will the data need to be updated?
Will new records need to be added or old ones deleted? How often?
Will the changes come in batches or in ones and twos?
How important is the data or information that is recorded?
What processes or functions are performed by the current system?
What processes or functions are to be performed by the new system?
When should they be done and where?
What special algorithms do these processes use?
Which processes should be executed manually?
What are the inputs to the current system?
What inputs are required for the proposed system?
What are the outputs from the current system?
What outputs will be required from the proposed system?
Are hard copies required?
How often will outputs be required?
What computing resources does the client possess?
Is the client prepared to purchase hardware/software resources?
Is security an issues?
Should there be restricted access to particular areas?
How are exceptions and errors handled in the current system?
What errors and exceptions should be reported in the proposed system?
How should they be reported?
Are there any constraints on hardware, software, data, methods of working, cost, time, etc.?
Does the user have a particular solution in mind?


\section{Investigation}


\subsubsection{Data sources and destinations}
\begin{center}
\begin{tabular}{|l|l|l|l|}
    \hline
    \textbf{Source} & \textbf{Data} & \textbf{Example Data} & \textbf{Destination} \\ \hline
	User & New stock & Stock type & database; stock item; all \\ \hline
	user & wastage & 2 pints pump 8 &database; stock item; units used, units remaining. \\ \hline
	database; stock item; all & stock check & shelf life & user \\ \hline
	database; stock item; stock ID, name, units remaining & stock items & stock ID & user \\ \hline
	
	
    
\end{tabular}
\label{tab:range_examples}
\end{center}

\subsubsection{Algorithms}

\subsubsection{Data flow diagram}

\subsubsection{Input Forms, Output Forms, Report Formats}

\subsection{The proposed system}

\subsubsection{Data sources and destinations}
\begin{center}
\begin{tabular}{|l|l|l|l|}
    \hline
    \textbf{Source} & \textbf{Data} & \textbf{Example Data} & \textbf{Destination} \\ \hline
	User & New stock & Stock type & database; stock item; all \\ \hline
	user & wastage & 2 pints pump 8 &database; stock item; units used, units remaining. \\ \hline
	database; stock item; all & stock check & shelf life & user \\ \hline
	database; stock item; stock ID, name, units remaining & stock items & stock ID & user \\ \hline
	
	
    
\end{tabular}
\label{tab:range_examples}
\end{center}

\subsubsection{Data flow diagram}

\subsubsection{Data dictionary}
\begin{center}
\begin{tabular}{|l|l|l|l|l|l|}
    \hline
    \textbf{Name} & \textbf{Data Type} & \textbf{Length} & \textbf{Validation} & \textbf{Example Data} & \textbf{Comment} \\ \hline
	stock ID & int & 2 bytes & 4 digits, must exsist & 3845 & unique to each stock item\\ \hline
	user ID & int & 2 bytes & 2 digits, must exsist & 04 & unique to each member of staff\\ \hline
	producer & string & 12 bytes & 4-12 chariters & taddingtons & name of product producer\\ \hline
	supplier & string & 14 bytes & 4-14 chariters & milton brewery & name of product supplier \\ \hline
	retail price & float & 2 bytes & int or decimal & 3.10 & price of a product for one base unit\\ \hline
	unit retail & int & 4 bytes & int 1-3 digits & 750 & base unit the product is sold in\\ \hline
	stockname & string & 14 bytes & string 4-14 & dead pony club & name of a product\\ \hline
	unit purchase & int & 3 bytes & 144 & int 1-144 & 72 & amount of the product in a box or barrel\\ \hline
	unit cost & int & 3 bytes & int 0-150 & 89 & cost of unit purchase\\ \hline
	stock type & string & 8 bytes & 5-8 chariters & real ale & type of stock\\ \hline
	 
\end{tabular}
\label{tab:range_examples}
\end{center}
\subsubsection{Volumetrics}

\section{Objectives}

\subsection{General Objectives}

\subsection{Specific Objectives}

\subsection{Core Objectives}

\subsection{Other Objectives}

\section{ER Diagrams and Descriptions}

\subsection{ER Diagram}

\subsection{Entity Descriptions}

\section{Object Analysis}

\subsection{Object Listing}

\subsection{Relationship diagrams}

\subsection{Class definitions}

\section{Other Abstractions and Graphs}

\section{Constraints}

\subsection{Hardware}

\subsection{Software}

\subsection{Time}

\subsection{User Knowledge}

\subsection{Access restrictions}

\section{Limitations}

\subsection{Areas which will not be included in computerisation}

\subsection{Areas considered for future computerisation}

\section{Solutions}

\subsection{Alternative solutions}

\subsection{Justification of chosen solution}
